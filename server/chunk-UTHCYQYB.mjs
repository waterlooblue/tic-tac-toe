import './polyfills.server.mjs';
import{B as V,E as j,G as b,H as z,I as U,J as x,K as H,L as Z,O as $,S as J,V as K,a as y,b as G,c as f,d as W,e as I,f as O,g as r,h as T,i as S,j as p,k as a,l as s,m as D,n as B,o as d,p as v,q as l,r as A,s as c,t as g,u as F,v as R,w as N}from"./chunk-MWIUVRFP.mjs";var ie=(i,e)=>({"text-blue":i,"text-orange":e}),M=class i{props;clickEvent=new O;sendClickEvent(){this.clickEvent.emit(this.props.position)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=f({type:i,selectors:[["app-square"]],inputs:{props:"props"},outputs:{clickEvent:"clickEvent"},standalone:!0,features:[g],decls:2,vars:6,consts:[[1,"inner-square",3,"click","disabled","ngClass"]],template:function(t,n){t&1&&(a(0,"button",0),d("click",function(){return n.sendClickEvent()}),l(1),s()),t&2&&(p("disabled",!n.props.enabled)("ngClass",R(3,ie,n.props.value==="x",n.props.value==="o")),r(),c(" ",n.props.value,`
`))},dependencies:[x,b],styles:[".inner-square[_ngcontent-%COMP%]{height:100%;width:100%;color:#fff;background-color:transparent;border:3px solid rgb(34,156,150);font-size:40px;font-weight:700;text-transform:uppercase;border-radius:0}@media screen and (min-width: 500px){.inner-square[_ngcontent-%COMP%]{font-size:60px}}.text-blue[_ngcontent-%COMP%]{color:#dfe5ff}.text-orange[_ngcontent-%COMP%]{color:#df960e}"]})};var h=class i{constructor(){}winningCombinations=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];movements=[];addMove(e){this.movements.push({position:e.position,player:e.player})}nextPlayer(e){return e==="x"?"o":"x"}resetBoard(){this.movements=[]}isGameDraw(){return this.movements.length===9}isGameWon(e){let t=this.getPlayerMovements(e),n=!1;return this.winningCombinations.forEach(o=>{this.compareWinningMovements(t,o).length===3&&(n=!0)}),n}getPlayerMovements(e){return this.movements.filter(t=>t.player===e)}compareWinningMovements(e,t){return e.filter(n=>n.position===t[0]||n.position===t[1]||n.position===t[2])}static \u0275fac=function(t){return new(t||i)};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})};var _=class i{constructor(e){this.movementsService=e}corners=[0,2,6,8];sides=[1,3,5,7];center=4;winningCombinations=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];getComputerMove(e){let t=this.getAvailableSquares(e),n=this.getRandomPosition(t);if(t.length===9)n=this.getRandomCornerPosition(e);else if(t.length===8)switch(this.getUserStartingPosition(e)){case"corner":case"edge":n=this.setMovement(this.center);break;default:n=this.getRandomCornerPosition(e)}else if(t.length===7&&!this.isCenterPositionAvailable(e))n=this.getRandomCornerPosition(e);else{let o=this.getWinMovement(e,"o"),m=this.getWinMovement(e,"x");o?n=o:m?n=m:this.getPlayerCorners(e).length===2&&(n=this.getRandomSidePosition(e))}return n}getAvailableSquares(e){return e.filter(n=>n.value==="")}getRandomPosition(e){let t=Math.floor(Math.random()*e.length);return this.setMovement(e[t].position)}getRandomCornerPosition(e){let t=e.filter(o=>o.value===""&&this.corners.some(m=>m===o.position)),n=Math.floor(Math.random()*t.length);return this.setMovement(t[n].position)}getRandomSidePosition(e){let t=e.filter(o=>o.value===""&&this.sides.some(m=>m===o.position)),n=Math.floor(Math.random()*t.length);return this.setMovement(t[n].position)}isCenterPositionAvailable(e){return e.some(t=>t.position===this.center)}getUserStartingPosition(e){let t="";switch(e.find(o=>o.value==="x")?.position){case 0:case 2:case 6:case 8:t="corner";break;case 1:case 3:case 5:case 7:t="edge";break;default:t="center"}return t}getWinMovement(e,t){let n=e.filter(u=>u.value===t),o=e.filter(u=>u.value===""),m=null;return this.winningCombinations.forEach(u=>{let k=this.compareWinningSquares(n,u);if(k.length===2){let E=u.find(C=>C!==k[0].position&&C!==k[1].position),te=o.find(C=>C.position===E&&C.value==="");E&&te&&(m=this.setMovement(E))}}),m}getPlayerCorners(e){return e.filter(t=>t.value==="x"&&this.corners.some(n=>n===t.position))}getPlayerSquares(e,t){return t.filter(n=>n.value===e)}compareWinningSquares(e,t){return e.filter(n=>n.position===t[0]||n.position===t[1]||n.position===t[2])}setMovement(e){return{position:e,player:"o"}}static \u0275fac=function(t){return new(t||i)(G(h))};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})};var re=i=>({complete:i}),ae=(i,e,t)=>({position:i,enabled:e,value:t});function se(i,e){if(i&1){let t=B();a(0,"app-square",10),d("clickEvent",function(o){W(t);let m=v();return I(m.receiveClick(o))}),s()}if(i&2){let t=e.$implicit;p("props",N(1,ae,t.position,t.enabled,t.value))}}function pe(i,e){if(i&1&&(a(0,"p"),l(1),s()),i&2){let t=v();r(),c("Player 2 wins: ",t.playerTwoWins,"")}}function le(i,e){if(i&1&&(a(0,"p"),l(1),s()),i&2){let t=v();r(),c("Computer wins: ",t.computerWins,"")}}function me(i,e){if(i&1&&(a(0,"p"),l(1),s()),i&2){let t=v();r(),c("It is ",t.currentPlayer==="x"?"Player 1's":"Player 2's"," turn")}}function ce(i,e){if(i&1&&(a(0,"p"),l(1),s()),i&2){let t=v();r(),c(" ",t.currentPlayer==="x"?"Player 1":"Player 2"," has won the game. Play again?")}}function ue(i,e){i&1&&(a(0,"p"),l(1," Game ended in a draw. Play again?"),s())}function de(i,e){if(i&1){let t=B();a(0,"button",11),d("click",function(){W(t);let o=v();return I(o.reset())}),l(1),s()}i&2&&(r(),A("Play Again"))}var w=class i{constructor(e,t){this.movementsService=e;this.computerService=t}currentPlayer="x";playComputer=!1;isGameWon=!1;isGameDraw=!1;playerOneWins=0;playerTwoWins=0;computerWins=0;draws=0;squares=[{position:0,value:"",enabled:!0},{position:1,value:"",enabled:!0},{position:2,value:"",enabled:!0},{position:3,value:"",enabled:!0},{position:4,value:"",enabled:!0},{position:5,value:"",enabled:!0},{position:6,value:"",enabled:!0},{position:7,value:"",enabled:!0},{position:8,value:"",enabled:!0}];receiveClick(e){(!this.playComputer||this.playComputer&&this.currentPlayer==="x")&&(this.playerMove(e),this.checkBoardForEnd())}togglePlayers(){this.playComputer=!this.playComputer,this.playerOneWins=0,this.playerTwoWins=0,this.computerWins=0,this.draws=0,this.reset()}reset(){this.movementsService.resetBoard(),this.squares.forEach(e=>{e.enabled=!0,e.value=""}),this.isGameWon=!1,this.isGameDraw=!1,this.currentPlayer=this.movementsService.nextPlayer(this.currentPlayer),this.playComputer&&this.currentPlayer==="o"&&setTimeout(()=>this.computerMove(),300)}playerMove(e){this.movementsService.addMove({position:e,player:this.currentPlayer}),this.setSquareValue(e)}computerMove(){let e=this.computerService.getComputerMove(this.squares);this.movementsService.addMove({position:e.position,player:this.currentPlayer}),this.setSquareValue(e.position),this.checkBoardForEnd()}checkBoardForEnd(){this.isGameWon=this.movementsService.isGameWon(this.currentPlayer),this.isGameDraw=this.movementsService.isGameDraw()&&!this.isGameWon,this.isGameWon?(this.currentPlayer==="x"?this.playerOneWins+=1:this.playComputer&&this.currentPlayer==="o"?this.computerWins+=1:this.playerTwoWins+=1,this.disableAllSquares(this.squares)):this.isGameDraw?this.draws+=1:(this.currentPlayer=this.movementsService.nextPlayer(this.currentPlayer),this.playComputer&&this.currentPlayer==="o"&&setTimeout(()=>this.computerMove(),300))}getSquareByPosition(e){return this.squares.find(t=>t?.position===e)}setSquareValue(e){let t=this.getSquareByPosition(e);t!=null&&(t.value=this.currentPlayer,t.enabled=!1)}disableAllSquares(e){e.forEach(t=>t.enabled=!1)}static \u0275fac=function(t){return new(t||i)(T(h),T(_))};static \u0275cmp=f({type:i,selectors:[["app-board"]],standalone:!0,features:[g],decls:22,vars:14,consts:[[1,"background"],[1,"container"],[2,"margin-bottom","30px","padding-top","30px"],[2,"margin-right","5px",3,"click","disabled"],[3,"click","disabled"],[1,"grid",3,"ngClass"],["class","square",3,"props","clickEvent",4,"ngFor","ngForOf"],[1,"row"],[4,"ngIf"],["class","reset",3,"click",4,"ngIf"],[1,"square",3,"clickEvent","props"],[1,"reset",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"section",1)(2,"div",2)(3,"button",3),d("click",function(){return n.togglePlayers()}),l(4,"2 Players"),s(),a(5,"button",4),d("click",function(){return n.togglePlayers()}),l(6,"Play vs Computer"),s()(),a(7,"div",5),S(8,se,1,5,"app-square",6),s(),a(9,"div",7)(10,"div")(11,"p"),l(12),s(),S(13,pe,2,1,"p",8)(14,le,2,1,"p",8),a(15,"p"),l(16),s()(),a(17,"div"),S(18,me,2,1,"p",8)(19,ce,2,1,"p",8)(20,ue,2,0,"p",8)(21,de,2,1,"button",9),s()()()()),t&2&&(r(3),p("disabled",!n.playComputer),r(2),p("disabled",n.playComputer),r(2),p("ngClass",F(12,re,n.isGameWon||n.isGameDraw)),r(),p("ngForOf",n.squares),r(4),c("Player 1 wins: ",n.playerOneWins,""),r(),p("ngIf",!n.playComputer),r(),p("ngIf",n.playComputer),r(2),c("Draws: ",n.draws,""),r(2),p("ngIf",!n.isGameWon&&!n.isGameDraw),r(),p("ngIf",n.isGameWon),r(),p("ngIf",n.isGameDraw),r(),p("ngIf",n.isGameWon||n.isGameDraw))},dependencies:[x,b,z,U,M],styles:[".grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;max-width:800px;margin:auto auto 30px;background-color:#0c141d;border:3px solid rgb(34,156,150)}.grid.complete[_ngcontent-%COMP%]{background-color:#101b27}.row[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%}@media screen and (min-width: 500px){.row[_ngcontent-%COMP%]{flex-direction:row}}.square[_ngcontent-%COMP%]{flex:1 1 33%;width:33%;min-height:100px}@media screen and (min-width: 500px){.square[_ngcontent-%COMP%]{min-height:200px}}.background[_ngcontent-%COMP%]{min-height:100vh;background-color:#101b27}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;max-width:800px;padding-left:15px;padding-right:15px;margin:auto}p[_ngcontent-%COMP%]{color:#fff}"]})};var q=class i{title="tic-tac-toe";static \u0275fac=function(t){return new(t||i)};static \u0275cmp=f({type:i,selectors:[["app-root"]],standalone:!0,features:[g],decls:2,vars:0,template:function(t,n){t&1&&D(0,"app-board")(1,"router-outlet")},dependencies:[J,w]})};var X=[];var Y={providers:[V({eventCoalescing:!0}),K(X),Z()]};var ve={providers:[$()]},ee=j(Y,ve);var fe=()=>H(q,ee),ze=fe;export{ze as a};
